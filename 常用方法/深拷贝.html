<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        const deepClone = (obj, hash = new WeakMap()) => {
            if (obj === null || obj === undefined) return obj
            if (typeof obj !== 'object') return obj

            if (toString.call(obj) === '[Object RegExp]') return new RegExp(obj)
            if (toString.call(obj) === '[Object Date]') return new Date(obj.getTime())
            if (toString.call(obj) === '[object Function]') {
                return function (...args) {
                    return obj.call(this, args);
                }
            }

            // 循环处理
            if (hash.has(obj)) return obj


            // 处理对象和数据
            const clonedObj = Array.isArray(obj) ? [] : {};

            for (let i in obj) {
                if (obj.hasOwnProperty(i)) {
                    clonedObj[i] = deepClone(obj[i], hash);
                }
            }

            return clonedObj
        }

    </script>
</body>

</html>